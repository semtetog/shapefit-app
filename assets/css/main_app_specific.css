/* --- ESTILOS ESPECÍFICOS APENAS PARA MAIN_APP.PHP --- */
/* Este arquivo é carregado DEPOIS do style.css global, */
/* então pode sobrescrever estilos globais ou adicionar novos. */

.main-app-container { /* Container interno da main_app */
    width: 100%;
    max-width: 480px;
    padding: 0 0 90px 0; /* Espaço para o bottom-nav, sem padding lateral próprio */
    background-color: var(--bg-color); /* Garante o mesmo fundo do body, se necessário */
}

/* Estilo para links de texto no cabeçalho da main_app (Ex: Minha Meta) */
.main-header-app .header-actions .header-action-link.text-link {
    font-size: 0.9em; 
    font-weight: 500; 
    color: var(--secondary-text-color); 
    text-decoration: none; 
    padding: 5px 8px; 
    border-radius: 6px; 
    transition: color 0.2s ease, background-color 0.2s ease;
}
.main-header-app .header-actions .header-action-link.text-link:hover {
    color: var(--accent-orange); 
    background-color: rgba(255, 107, 0, 0.08); /* Fundo sutil no hover */
}
/* Estilo para ícones no cabeçalho da main_app (Ex: Configurações) */
.main-header-app .header-actions .header-action-link i.fas {
    font-size: 22px;
    color: var(--secondary-text-color);
    transition: color 0.2s ease;
    vertical-align: middle; /* Adicionado para melhor alinhamento */
}
.main-header-app .header-actions .header-action-link:hover i.fas {
    color: var(--accent-orange);
}

/* Cards Padronizados DENTRO DA MAIN_APP */
.card-shadow {
    background-color: var(--surface-color);
    border-radius: 12px;
    padding: 20px;
    margin-bottom: 20px;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.25);
}
.card-shadow-light {
    background-color: var(--surface-color);
    /* padding: 15px; O padding será tratado pelos filhos ou pelo contexto */
    border-radius: 10px;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
}
.card-shadow-prominent {
    background-image: linear-gradient(135deg, var(--accent-orange), var(--accent-red));
    color: white;
    border-radius: 12px;
    padding: 25px;
    margin-bottom: 20px;
    box-shadow: 0 6px 20px rgba(0,0,0,0.25);
    text-align: center;
}
.card-shadow-prominent h2,
.card-shadow-prominent p {
    color: white;
}
.card-shadow-prominent .btn {
    display: inline-flex; align-items: center; justify-content: center;
    background: rgba(255,255,255,0.15);
    border: 1px solid rgba(255,255,255,0.3);
    color: white;
    font-weight: 500;
}
.card-shadow-prominent .btn:hover { background: rgba(255,255,255,0.25); }
.card-shadow-prominent .btn i.btn-icon-fa { margin-right: 6px; font-size: 1em; }

/* Título da Seção */
.section-title {
    font-size: 1.25em; font-weight: 600; margin-bottom: 15px; color: var(--primary-text-color);
}
.section-header {
    display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;
}
.section-header .section-title { margin-bottom: 0; }
.view-all-link.animated-underline {
    position: relative; text-decoration: none; font-size: 0.9em;
    color: var(--secondary-text-color); font-weight: 500;
}
.view-all-link.animated-underline::after {
    content: ''; position: absolute; width: 0; height: 1.5px; display: block;
    margin-top: 2px; right: 0; background: var(--accent-orange); transition: width 0.3s ease;
}
.view-all-link.animated-underline:hover::after { width: 100%; left: 0; }
.view-all-link.animated-underline:hover { color: var(--accent-orange); }

/* Cabeçalho da Página main_app.php */
.main-header-app {
    display: flex; justify-content: space-between; align-items: center;
    padding: 10px 0 20px 0; margin-bottom: 20px;
}
.user-greeting { font-size: 1.5em; font-weight: 400; color: var(--primary-text-color); }
.user-greeting .user-first-name { font-weight: 600; }
.header-actions { display: flex; align-items: center; gap: 12px; }
/* Estilos para .header-action-link i.fas e .text-link já estão no topo deste arquivo */

/* Banner de Peso Atual */
.current-weight-banner.card-shadow-light { /* Garante que o padding é aplicado aqui se não vier do .card-shadow-light genérico */
    padding: 12px 18px; /* Padding interno do banner */
    display: flex; justify-content: space-between; align-items: center;
    margin-bottom: 20px; font-size: 1em;
}
.current-weight-banner .editable-field { font-weight: 600; color: var(--accent-orange); }
.current-weight-banner i.edit-icon {
    font-size: 17px; color: var(--secondary-text-color); cursor: pointer;
    transition: color 0.2s ease; margin-left: 10px;
}
.current-weight-banner i.edit-icon:hover { color: var(--accent-orange); }

/* Resumo Diário Card */
.daily-summary-card.card-shadow { /* Garante padding se não vier do .card-shadow genérico */
    padding: 20px;
}
.daily-summary-card h2.section-title { text-align: center; margin-bottom: 20px; }
.consumption-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 10px; }
.consumption-item { text-align: center; display: flex; flex-direction: column; align-items: center; }
.consumption-item p { font-size: 0.8em; color: var(--secondary-text-color); margin-top: 6px; }
.progress-circle { width: 60px; height: 60px; position: relative; }
.circular-chart { display: block; margin: 0 auto; }
.circle-bg { fill: none; stroke: var(--border-color); stroke-width: 2.8; }
.circle {
    fill: none; stroke: var(--accent-orange); stroke-width: 3.0;
    stroke-linecap: round; animation: progress-animation 1s ease-out forwards;
    transform-origin: center; transform: rotate(-90deg);
}
.percentage-text {
    fill: var(--primary-text-color); font-family: 'Poppins', sans-serif;
    font-size: 12px; font-weight: 600; text-anchor: middle; dominant-baseline: middle;
}
/* @keyframes progress-animation está no style.css global */

/* Card de Hidratação */
.hydration-tracker-card.card-shadow { /* Garante padding */
    padding: 20px;
    text-align: center;
}
.hydration-tracker-card .hydration-icon-text {
    display: flex; align-items: center; justify-content: center; gap: 8px; margin-bottom: 15px;
}
.hydration-icon-text i.water-drop-icon { font-size: 24px; color: var(--accent-orange); }
.hydration-tracker-card h3 {
    font-size: 1.1em; color: var(--primary-text-color); margin: 0; font-weight: 500;
}
.water-controls {
    display: flex; align-items: center; justify-content: center; gap: 18px; margin-bottom: 15px;
}
.water-btn {
    background: var(--surface-color); color: var(--accent-orange);
    border: 1px solid var(--border-color); border-radius: 50%;
    width: 34px; height: 34px; font-size: 1.7em; line-height: 32px; cursor: pointer;
    font-weight: 400; transition: background-color 0.2s ease, color 0.2s ease, border-color 0.2s ease;
    display: flex; align-items: center; justify-content: center;
}
.water-btn:hover { background: var(--accent-orange); color: white; border-color: var(--accent-orange); }
.water-status { font-size: 1em; }
.water-status span { font-weight: 600; }
.water-progress-bar-container {
    width: 75%; height: 6px; background-color: var(--border-color);
    border-radius: 3px; margin: 0 auto 5px auto; overflow: hidden;
}
.water-progress-bar-fill {
    height: 100%; background-image: linear-gradient(90deg, var(--accent-orange), var(--accent-red));
    border-radius: 3px; width: 0%; transition: width 0.5s ease-out;
}



/* Card de Adicionar Refeição (meal-prompt) */
.meal-prompt-card.card-shadow-prominent { /* Garante padding */
    padding: 25px;
}
.meal-prompt-card i.meal-prompt-icon {
    font-size: 32px; margin-bottom: 12px; color: rgba(255,255,255,0.8);
    display: block; margin-left: auto; margin-right: auto;
}
.meal-prompt-card h2 { font-size: 1.4em; margin-bottom: 6px; }
.meal-prompt-card p { margin-bottom: 20px; font-size: 1em; opacity: 0.85; }
/* Estilo do .btn .add-meal-main-btn dentro de .card-shadow-prominent já está no topo */

/* Sugestões de Refeições - ESTA É A SEÇÃO ATUALIZADA */
.suggestions-carousel {
    display: flex;
    overflow-x: auto;
    gap: 12px;
    padding: 5px 2px 15px 2px;
    -ms-overflow-style: none; 
    scrollbar-width: none;
}
.suggestions-carousel::-webkit-scrollbar { display: none; }

.suggestion-item.card-shadow-light { 
    padding: 0; /* SEM PADDING INTERNO NO CARD PRINCIPAL */
    border-radius: 10px; 
    overflow: hidden; /* ESSENCIAL */
    width: 140px;    
    min-width: 140px; 
    flex-shrink: 0; 
    display: flex; 
    flex-direction: column; 
    /* background-color e box-shadow vêm de .card-shadow-light global */
}

.suggestion-item .recipe-suggestion-link {
    display: flex;
    flex-direction: column;
    text-decoration: none !important; 
    color: var(--primary-text-color); 
    height: 100%; 
}
.suggestion-item .recipe-suggestion-link h3,
.suggestion-item .recipe-suggestion-link span {
    text-decoration: none; 
}

.suggestion-item .recipe-suggestion-link img {
    width: 100%; 
    height: 80px; 
    object-fit: cover; 
    display: block; 
}

.suggestion-item .recipe-suggestion-link .recipe-info {
    padding: 8px 10px 10px 10px; 
    background-color: var(--surface-color); 
    flex-grow: 1; 
    display: flex;
    flex-direction: column;
}

.suggestion-item .recipe-suggestion-link .recipe-info h3 {
    font-size: 0.9em; 
    font-weight: 500; 
    color: var(--primary-text-color); 
    margin-bottom: 4px; 
    line-height: 1.3;
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
    text-overflow: ellipsis;
    min-height: 2.6em; 
}

.suggestion-item .recipe-suggestion-link .recipe-info span {
    font-size: 0.75em; 
    color: var(--secondary-text-color); 
    margin-top: auto; 
}
/* FIM DA SEÇÃO DE SUGESTÕES ATUALIZADA */


/* Lista de Refeições do Dia */
.todays-meals-list-section { margin-bottom: 15px; }
.meal-list-main { list-style: none; padding: 0; margin: 0; }
.meal-list-item.card-shadow-light { /* Garante padding */
    padding: 10px 15px; /* Padding aqui, já que o link preenche */
    margin-bottom: 10px; 
    transition: transform 0.15s ease, box-shadow 0.15s ease;
}
.meal-list-item:hover { transform: translateY(-1px); box-shadow: 0 3px 10px rgba(0,0,0,0.22); }
.meal-list-item a {
    color: var(--primary-text-color); text-decoration: none;
    display: flex; justify-content: space-between; align-items: center;
    font-weight: 500; 
    /* padding: 10px 15px; Removido daqui, colocado no .meal-list-item */
}
.meal-list-item a span:first-child { display: flex; align-items: center; gap: 10px; }
.meal-list-item a i.fas {
    font-size: 17px; /* Cor é definida inline no HTML (precisa mudar para CSS se quiser consistência) */
    width: 20px; text-align: center; transition: color 0.2s ease; line-height: 1;
}
/* Para consistência, remova o style="color: var(--accent-orange);" do HTML e use isto: */
/* .meal-list-item a i.fas { color: var(--accent-orange); } */

.meal-list-item a:hover i.fas { color: var(--accent-red); } /* Exemplo de cor no hover */
.meal-list-item .meal-kcal { color: var(--accent-orange); font-size: 0.9em; font-weight: 600; }



.nav-item i.fas { font-size: 22px; margin-bottom: 4px; }
.nav-item.active,
.nav-item:hover { color: var(--accent-orange); }
.nav-item:active { transform: scale(0.95); }


/* --- Media Queries para main_app_specific.css --- */
@media (max-width: 400px) {
    .main-app-container { padding-bottom: 80px; }

    .main-header-app { flex-direction: column; gap: 8px; align-items: flex-start; padding-bottom: 15px;}
    .user-greeting { font-size: 1.3em; }
    .header-actions { align-self: flex-end; gap: 10px;}
    .header-action-link i.fas { font-size: 20px; }
    .main-header-app .header-actions .header-action-link.text-link { font-size: 0.85em; padding: 4px 6px;}


    .current-weight-banner.card-shadow-light { font-size: 0.95em; padding: 10px 15px; margin-bottom: 15px; }
    .current-weight-banner i.edit-icon { font-size: 16px; }

    .section-title { font-size: 1.15em; }
    .card-shadow, .card-shadow-light, .card-shadow-prominent { padding: 15px; margin-bottom: 15px; }
    .card-shadow-prominent { padding: 20px; }

    .consumption-grid { grid-template-columns: repeat(2, 1fr); gap: 10px; }
    .progress-circle { width: 55px; height: 55px; }
    .percentage-text { font-size: 11px; }
    .consumption-item p { font-size: 0.75em; }

    .hydration-tracker-card h3 { font-size: 1em; }
    .hydration-icon-text i.water-drop-icon { font-size: 22px; }
    .water-controls { gap: 15px;}
    .water-btn { width: 30px; height: 30px; font-size: 1.5em; line-height: 28px;}
    .water-status { font-size: 0.95em; }
    .water-progress-bar-container { width: 85%; }

   
    .meal-prompt-card i.meal-prompt-icon { font-size: 28px; }
    .meal-prompt-card h2 { font-size: 1.25em; }
    .meal-prompt-card p { font-size: 0.9em; margin-bottom: 15px; }
    .meal-prompt-card .add-meal-main-btn { font-size: 1em; padding: 10px 20px; }
    .meal-prompt-card .add-meal-main-btn i.btn-icon-fa { font-size: 0.95em; }

    .suggestion-item.card-shadow-light { width: 125px; min-width: 125px; }
    .suggestion-item .recipe-suggestion-link img { height: 70px; }
    .suggestion-item .recipe-suggestion-link .recipe-info h3 { font-size: 0.85em; min-height: 2.4em; }
    .suggestion-item .recipe-suggestion-link .recipe-info span { font-size: 0.7em; }

    .meal-list-item.card-shadow-light { padding: 10px 12px; }
    .meal-list-item a i.fas { font-size: 16px; width: 18px;}
    .meal-list-item .meal-kcal { font-size: 0.85em; }

    
}

/* --- ESTILOS PARA A PÁGINA DE DETALHES DA RECEITA (view_recipe.php) --- */
/* (Estes foram adicionados na resposta anterior e são mantidos aqui) */

.recipe-detail-container .header-nav {
    margin-bottom: 0px; padding: 10px 0; border-bottom: 1px solid var(--border-color); margin-bottom: 15px;
}
.recipe-detail-container .page-title { text-align: center; margin-bottom: 15px; }
.recipe-detail-image {
    width: 100%; max-height: 300px; object-fit: cover;
    border-radius: 12px; margin-bottom: 20px; display: block;
}
.recipe-main-info.card-shadow-light { /* Adicionado .card-shadow-light aqui para herdar estilos base */
    padding: 20px; text-align: center; margin-bottom: 20px;
    /* margin-top: -50px; position: relative; z-index: 1; background-color: var(--bg-color); */ /* Estilo de sobreposição opcional */
}
.recipe-name-main { font-size: 1.7em; font-weight: 600; color: var(--primary-text-color); margin-bottom: 8px; line-height: 1.2; }
.recipe-description-short { font-size: 0.9em; color: var(--secondary-text-color); margin-bottom: 15px; line-height: 1.5; }
.recipe-rating { margin-bottom: 15px; color: var(--accent-orange); font-size: 1.1em; }
.recipe-rating .fa-star { margin: 0 1px; }
.recipe-rating .far.fa-star { color: var(--border-color); }

.recipe-macros-summary.card-shadow-light { /* Adicionado .card-shadow-light */
    display: grid; grid-template-columns: repeat(4, 1fr); gap: 10px;
    text-align: center; padding: 15px; margin-bottom: 5px;
}
.recipe-macros-summary .recipe-serving-info { /* Estilo para o texto "Informação nutricional por..." */
    grid-column: 1 / -1; font-size: 0.8em; color: var(--secondary-text-color);
    margin-top: 10px; margin-bottom: 0;
}
.macro-info-item .value { display: block; font-size: 1.1em; font-weight: 600; color: var(--primary-text-color); margin-bottom: 3px; }
.macro-info-item .label { font-size: 0.75em; color: var(--secondary-text-color); text-transform: uppercase; }

.recipe-timing-servings.card-shadow-light { /* Adicionado .card-shadow-light */
    display: flex; justify-content: space-around; align-items: center;
    padding: 12px 15px; margin-bottom: 20px; font-size: 0.9em; color: var(--secondary-text-color);
}
.recipe-timing-servings .timing-item,
.recipe-timing-servings .servings-item { display: flex; align-items: center; gap: 6px; }
.recipe-timing-servings i { font-size: 1.1em; color: var(--accent-orange); }

.recipe-section.card-shadow-light { /* Adicionado .card-shadow-light */
    margin-bottom: 25px; padding: 15px; /* Padding para seções de ingredientes/preparo */
}
.recipe-section-title { /* Este é um h3 dentro de .recipe-section */
    font-size: 1.3em; font-weight: 600; color: var(--primary-text-color);
    margin-bottom: 15px; padding-bottom: 8px; border-bottom: 1px solid var(--border-color);
}
.recipe-ingredient-list { list-style: none; padding-left: 5px; font-size: 0.95em; line-height: 1.7; color: var(--primary-text-color); }
.recipe-ingredient-list li { margin-bottom: 5px; }

.recipe-instructions .instruction-step { display: flex; gap: 12px; margin-bottom: 15px; align-items: flex-start; }
.instruction-step .step-number { font-size: 1.8em; font-weight: 600; color: var(--accent-orange); line-height: 1; min-width: 25px; text-align: right; }
.instruction-step p { font-size: 0.95em; line-height: 1.6; color: var(--primary-text-color); margin: 0; }

.recipe-notes-card.card-shadow-light { padding: 15px; }
.recipe-notes-card p { font-size: 0.9em; color: var(--secondary-text-color); line-height: 1.6; }

.register-meal-section.card-shadow { /* Adicionado .card-shadow */
    padding: 20px; margin-top: 30px;
}
.register-meal-section .recipe-section-title { text-align:center; margin-bottom:20px; border-bottom: none; } /* Título do formulário */
.register-meal-section .form-group label { font-weight: 500; }

/* Ajustes mobile para recipe-detail-page */
@media (max-width: 400px) {
    .recipe-detail-container .header-nav .page-title { font-size: 1.2em; }
    .recipe-detail-image { max-height: 200px; margin-bottom: 15px; }
    .recipe-main-info.card-shadow-light { padding: 15px; /* margin-top: -40px; */ }
    .recipe-name-main { font-size: 1.5em; }
    .recipe-description-short { font-size: 0.9em; }
    .recipe-rating { font-size: 1em; }
    .recipe-macros-summary.card-shadow-light { grid-template-columns: repeat(2, 1fr); gap: 15px; }
    .macro-info-item .value { font-size: 1em; }
    .macro-info-item .label { font-size: 0.7em; }
    .recipe-timing-servings.card-shadow-light { flex-direction: column; gap: 8px; align-items: flex-start; font-size: 0.85em; }
    .recipe-section.card-shadow-light .recipe-section-title { font-size: 1.15em; } /* Seletor mais específico */
    .recipe-ingredient-list { font-size: 0.9em; line-height: 1.6; }
    .instruction-step .step-number { font-size: 1.5em; }
    .instruction-step p { font-size: 0.9em; }
    .recipe-notes-card.card-shadow-light p { font-size: 0.85em; }
    .register-meal-section.card-shadow .btn { font-size: 0.95em; padding: 12px; } /* Seletor mais específico */
}
/* Estilos para add_food_to_diary.php - Adicionar ao main_app_specific.css ou criar um novo */
.add-food-container .page-title {
    font-size: 1.4em; /* Título da página um pouco menor */
}

.meal-setup-row {
    display: flex;
    gap: 15px;
    margin-bottom: 10px; /* Menos espaço antes da busca */
}
.meal-setup-row .form-group {
    flex: 1;
    margin-bottom: 0;
}
.meal-setup-row .form-group label {
    font-size: 0.8em;
    margin-bottom: 4px;
}
.meal-setup-row .form-control {
    padding: 10px 12px; /* Inputs menores */
    min-height: 44px;
}

.search-input-wrapper {
    position: relative;
    margin-bottom: 15px;
}
.search-input-wrapper .search-icon-input {
    position: absolute;
    left: 15px;
    top: 50%;
    transform: translateY(-50%);
    color: var(--secondary-text-color);
    font-size: 0.9em;
}
#food-search-input {
    padding-left: 40px !important; /* Para dar espaço ao ícone */
}

#search-results-container {
    max-height: 200px; /* Limita altura e adiciona scroll se necessário */
    overflow-y: auto;
    border: 1px solid var(--border-color);
    border-radius: 8px;
    margin-bottom: 15px;
    background-color: var(--surface-color);
}
.search-results-list {
    list-style: none;
    padding: 0;
    margin: 0;
}
.search-results-list li {
    padding: 10px 15px;
    cursor: pointer;
    border-bottom: 1px solid var(--border-color);
    font-size: 0.95em;
}
.search-results-list li:last-child {
    border-bottom: none;
}
.search-results-list li:hover {
    background-color: #2a2a2a;
}
#search-results-container .loading-results,
#search-results-container .no-results,
#search-results-container .error-results {
    padding: 15px;
    text-align: center;
    color: var(--secondary-text-color);
    font-style: italic;
}


#selected-food-details-container {
    padding: 15px;
    margin-bottom: 20px;
}
#selected-food-details-container h3 {
    font-size: 1.1em;
    margin-bottom: 15px;
    color: var(--accent-orange);
    text-align: center;
}
#selected-food-details-container .form-group label {
    font-size: 0.85em;
}
.macros-preview {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 5px 10px;
    font-size: 0.85em;
    margin: 15px 0;
    color: var(--secondary-text-color);
}
.macros-preview span {
    color: var(--primary-text-color);
    font-weight: 500;
}
#selected-food-details-container .btn-sm {
    padding: 6px 12px;
    font-size: 0.8em;
    margin-right: 5px;
}
#selected-food-details-container .btn-link {
    color: var(--secondary-text-color);
    text-decoration: none;
}
#selected-food-details-container .btn-link:hover {
    color: var(--primary-text-color);
}

.current-meal-summary {
    padding: 15px;
    margin-bottom: 80px; /* Espaço para o botão de salvar fixo */
}
.current-meal-summary h4 {
    font-size: 1.1em;
    margin-bottom: 10px;
    border-bottom: 1px solid var(--border-color);
    padding-bottom: 8px;
}
#current-meal-items-list {
    list-style: none;
    padding: 0;
    margin: 0;
}
#current-meal-items-list li {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 8px 0;
    font-size: 0.9em;
    border-bottom: 1px dashed var(--border-color);
}
#current-meal-items-list li:last-child {
    border-bottom: none;
}
.current-meal-item-name {
    flex-grow: 1;
    margin-right: 10px;
}
.current-meal-item-macros {
    color: var(--secondary-text-color);
    font-size: 0.9em;
}
#current-meal-items-list .btn-remove-item {
    background: none;
    border: none;
    color: var(--danger-color);
    font-size: 1.2em;
    cursor: pointer;
    padding: 0 5px;
}
.empty-meal-placeholder {
    color: var(--secondary-text-color);
    font-style: italic;
    text-align: center;
    padding: 10px 0 !important; /* Sobrescreve padding do li */
    border-bottom: none !important;
}

.current-meal-totals {
    margin-top: 15px;
    padding-top: 10px;
    border-top: 1px solid var(--border-color);
    text-align: right;
    font-weight: 600;
}
.current-meal-totals span {
    color: var(--accent-orange);
}

.form-actions-fixed {
    position: fixed;
    bottom: 60px; /* Acima do bottom-nav */
    left: 0;
    right: 0;
    padding: 15px 20px;
    background-color: var(--bg-color); /* Mesmo fundo do body */
    box-shadow: 0 -2px 10px rgba(0,0,0,0.2);
    display: flex;
    gap: 10px;
    z-index: 999; /* Abaixo do bottom-nav (1000), mas acima do conteúdo */
    max-width: 480px; /* Para alinhar com o container */
    margin: 0 auto; /* Centraliza */
}
.form-actions-fixed .btn {
    flex: 1;
}



/* --- ESTILO DO CONTADOR DE PONTOS NO HEADER --- */
.points-counter-badge {
    display: flex;
    align-items: center;
    background-color: var(--surface-color);
    border-radius: 20px;
    padding: 5px 12px 5px 6px;
    text-decoration: none;
    color: var(--primary-text-color);
    font-weight: 600;
    font-size: 0.95em;
    box-shadow: 0 2px 8px rgba(0,0,0,0.2);
    transition: transform 0.2s ease, box-shadow 0.2s ease;
}

.points-counter-badge:hover {
    transform: scale(1.05);
    box-shadow: 0 4px 12px rgba(0,0,0,0.3);
}

.points-counter-badge img {
    width: 28px;        /* Define uma largura fixa */
    height: 28px;       /* Define uma altura fixa para manter a proporção 1:1 */
    object-fit: contain; /* Garante que a imagem caiba dentro sem distorcer */
    margin-right: 8px;
}

/* --- ANIMAÇÃO "FOGUINHO" DE PONTOS --- */
.point-feedback-animation {
    position: absolute; /* Usará 'fixed' se o body for o pai, mas 'absolute' se for adicionado a um elemento posicionado */
    z-index: 9999; /* Garante que fique acima de tudo */
    width: 40px;
    height: 40px;
    background-image: url('https://i.ibb.co/L8LXQt0y/POINTS.webp');
    background-size: contain;
    background-repeat: no-repeat;
    pointer-events: none; /* A animação não pode ser clicada */
    
    /* Aplica a animação */
    animation: float-up-and-fade 1.5s ease-out forwards;
}

@keyframes float-up-and-fade {
    0% {
        transform: translateY(0) scale(0.5);
        opacity: 1;
    }
    100% {
        transform: translateY(-80px) scale(1.2); /* Sobe 80px, cresce e desaparece */
        opacity: 0;
    }
}




/* =================================== */
/*    ESTILOS FINAIS PARA O RANKING "PLACAR"    */
/* =================================== */

.ranking-clash-card {
    display: flex;
    justify-content: space-between;
    align-items: center;
    text-decoration: none;
    color: var(--primary-text-color);
    padding: 15px;
    background: linear-gradient(135deg, #2a2a2e, #1E1E1E);
    transition: all 0.3s ease;
    margin-bottom: 20px;
    border: 1px solid var(--border-color);
}
.ranking-clash-card:hover {
    transform: scale(1.02);
    box-shadow: 0 8px 25px rgba(0,0,0,0.3);
    border-color: var(--accent-orange);
}

.player-info {
    display: flex;
    flex-direction: column;
    align-items: center;
    text-align: center;
    width: 25%;
    gap: 4px;
}
.player-info img {
    width: 50px;
    height: 50px;
    border-radius: 50%;
    object-fit: cover;
    border: 2px solid var(--border-color);
}
.player-info .player-name {
    font-size: 0.9em;
    font-weight: 600;
    white-space: nowrap;
}
.player-info .player-rank {
    font-size: 0.8em;
    font-weight: 500;
    color: var(--secondary-text-color);
}
.player-info .opponent-rank {
    color: var(--primary-text-color);
}
.player-info .opponent-rank .fa-trophy {
    margin-right: 3px;
    color: var(--secondary-text-color);
}

.clash-center {
    flex-grow: 1;
    padding: 0 10px;
    text-align: center;
}
.clash-title {
    font-size: 0.75em;
    font-weight: 500;
    color: var(--secondary-text-color);
    text-transform: uppercase;
    letter-spacing: 0.5px;
    display: block;
    margin-bottom: 8px;
}

.progress-bar-clash {
    height: 8px;
    background-color: rgba(255,255,255,0.1);
    border-radius: 4px;
    overflow: hidden;
    margin-bottom: 8px;
}
.progress-bar-clash .progress-fill {
    height: 100%;
    /* CORREÇÃO DO GRADIENTE: verde para laranja */
    background: linear-gradient(90deg, var(--accent-orange), var(--success-color));
    border-radius: 4px;
    transition: width 0.5s ease-out;
}

.clash-cta {
    font-size: 0.9em;
    font-weight: 600;
    color: var(--accent-orange);
}

/* Estilos para quando o usuário é o 1º lugar */
.clash-title-winner {
    font-size: 0.9em;
    font-weight: 700;
    color: #FFD700;
    display: block;
    margin-bottom: 8px;
}
.clash-title-winner .fa-star {
    font-size: 0.8em;
    opacity: 0.8;
}
.progress-bar-clash.winner .progress-fill {
    background: #FFD700; /* Barra de progresso dourada */
}
.clash-cta-winner {
    font-size: 0.9em;
    font-weight: 600;
    color: var(--secondary-text-color);
}

/* =================================== */
/*    CARD DE HIDRATAÇÃO REFINADO V2   */
/* =================================== */

/* ===== ESTILOS GERAIS ===== */
.hydration-animated-card {
    padding: 20px;
    position: relative;
    overflow: hidden;
}

.hydration-animated-card .card-content {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 20px;
}

.hydration-info {
    flex-grow: 1;
    display: flex;
    flex-direction: column;
    justify-content: center;
    text-align: left;
}

.hydration-header {
    display: flex;
    align-items: center;
    gap: 10px;
    margin-bottom: 8px;
    justify-content: flex-start;
}

.hydration-header .water-drop-icon {
    font-size: 1.5em;
    color: #3498db;
}

.hydration-header h3 {
    margin: 0;
    font-size: 1.2em;
    font-weight: 600;
}

.hydration-info p {
    font-size: 0.9em;
    color: var(--secondary-text-color);
    margin: 0 0 20px 0;
}

.water-controls {
    display: flex;
    align-items: center;
    gap: 15px;
    justify-content: flex-start;
}

.water-btn {
    background-color: var(--surface-color);
    border: 1px solid var(--border-color);
    color: var(--accent-orange);
    width: 44px;
    height: 44px;
    border-radius: 50%;
    font-size: 2em;
    font-weight: 300;
    line-height: 1;
    cursor: pointer;
    transition: all 0.2s ease;
    display: flex;
    align-items: center;
    justify-content: center;
}

.water-btn:hover {
    background-color: var(--accent-orange);
    color: white;
    transform: scale(1.05);
}
.water-btn:active {
    transform: scale(0.95);
}

.water-status {
    font-size: 1.5em;
    font-weight: 600;
    min-width: 90px;
    text-align: center;
}

.glass-container-svg {
    flex-shrink: 0;
}

/* ===== ANIMAÇÕES (CSS PURO E EFICIENTE) ===== */

#animated-glass #water-level-group {
    /* A transição suave continua aqui, isso está correto. */
    transition: transform 0.8s cubic-bezier(0.4, 0, 0.2, 1);

    /* 'will-change' ainda é uma boa otimização. */
    will-change: transform;

    /* A linha abaixo foi REMOVIDA para não conflitar com o JavaScript */
    /* transform: translateZ(0); */
}
/* ANIMAÇÃO DE ONDAS */
#wave1 {
    animation: wave-flow 2s linear infinite;
}

#wave2 {
    animation: wave-flow 2.5s linear infinite reverse;
}

@keyframes wave-flow {
    from { transform: translateX(0); }
    to { transform: translateX(-200px); }
}

/* ===== EFEITOS VISUAIS (GLOW SUAVE E CORRETO) ===== */

/* O contorno do copo agora é o responsável pelo glow */
#glass-outline {
    /* O glow terá uma transição suave, acompanhando a água */
    transition: filter 0.8s cubic-bezier(0.4, 0, 0.2, 1);
    will-change: filter;
    /* Por padrão, não há glow */
    filter: drop-shadow(0 0 0px rgba(52, 152, 219, 0));
}

/* ===== ESTILOS MOBILE (LAYOUT REFINADO) ===== */
@media (max-width: 480px) {
    .hydration-animated-card {
        padding: 20px 15px;
    }

    .hydration-animated-card .card-content {
        flex-direction: column;
        gap: 15px;
    }

    .glass-container-svg {
        order: -1;
        margin-bottom: 10px;
        width: 90px;
        height: auto;
    }

    .hydration-info {
        text-align: center;
        width: 100%;
    }

    .hydration-header {
        justify-content: center;
    }

    .hydration-info p {
        margin-bottom: 15px;
    }

    .water-controls {
        width: 100%;
        justify-content: center;
    }

    .water-status {
        min-width: 80px;
        font-size: 1.4em;
    }

    .water-btn {
        -webkit-tap-highlight-color: transparent;
    }
}
/* Container para alinhar a meta e o ícone de informação */
.hydration-goal-container {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 8px; /* Espaço entre o texto da meta e o ícone */
    margin-bottom: 12px;
}

/* Garante que o texto da meta não ocupe toda a largura */
.hydration-goal-text {
    margin: 0;
    text-align: center; /* Centraliza o texto dentro do parágrafo */
}

/* Wrapper para o ícone e o tooltip, para posicionamento */
.info-tooltip-wrapper {
    position: relative;
    display: flex;
    align-items: center;
}

/* Estilo do ícone de informação (?) */
.info-tooltip-wrapper .info-icon {
    font-size: 16px;
    color: var(--secondary-text-color);
    cursor: pointer;
    transition: color 0.2s ease;
}

.info-tooltip-wrapper .info-icon:hover {
    color: var(--accent-orange);
}

/* O tooltip que aparece (inicialmente escondido) */
.info-tooltip-wrapper .tooltip-content {
    position: absolute;
    bottom: 120%; /* Aparece acima do ícone */
    left: 50%;
    transform: translateX(-50%);
    background-color: var(--surface-color);
    color: var(--primary-text-color);
    padding: 8px 12px;
    border-radius: 6px;
    font-size: 0.8em;
    font-weight: 500;
    white-space: nowrap; /* Impede que o texto quebre linha */
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
    border: 1px solid var(--border-color);
    
    /* Animação e visibilidade */
    opacity: 0;
    visibility: hidden;
    transition: opacity 0.2s ease, visibility 0.2s ease;
    z-index: 10;
}

/* Setinha para baixo no tooltip */
.info-tooltip-wrapper .tooltip-content::after {
    content: '';
    position: absolute;
    top: 100%;
    left: 50%;
    margin-left: -5px;
    border-width: 5px;
    border-style: solid;
    border-color: var(--surface-color) transparent transparent transparent;
}

/* Mostra o tooltip quando o mouse passa por cima do wrapper (ou quando tocado) */
.info-tooltip-wrapper:hover .tooltip-content,
.info-tooltip-wrapper:focus-within .tooltip-content {
    opacity: 1;
    visibility: visible;
}

/* ================================================= */
/* ESTILO PARA BANNER DE PESO DINÂMICO (VERSÃO FINAL)*/
/* ================================================= */

/* Estilo Base para AMBAS as versões do banner */
.current-weight-banner {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 15px 20px;
    margin-bottom: 20px;
    border-radius: 12px;
    background-color: var(--surface-color);
    border: 1px solid var(--border-color);
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
    transition: background-color 0.3s ease;
}

/* --- Versão 1: QUANDO PODE EDITAR --- */
.current-weight-banner.can-edit {
    color: var(--primary-text-color);
}
.current-weight-banner.can-edit #current-weight-value {
    font-weight: 600;
    color: var(--accent-orange);
    margin-left: 5px;
}
.current-weight-banner.can-edit .edit-weight-btn {
    background: none;
    border: none;
    color: var(--secondary-text-color);
    font-size: 18px;
    cursor: pointer;
    padding: 5px;
    transition: color 0.2s ease, transform 0.2s ease;
}
.current-weight-banner.can-edit .edit-weight-btn:hover {
    color: var(--accent-orange);
    transform: scale(1.1);
}

/* --- Versão 2: QUANDO ESTÁ BLOQUEADO --- */
.current-weight-banner.is-locked {
    /* Deixa o fundo um pouco mais escuro para indicar inatividade */
    background-color: #1A1A1A; 
    color: var(--secondary-text-color);
}
.current-weight-banner.is-locked .locked-info {
    display: flex;
    align-items: center;
    gap: 10px;
    font-size: 0.9em;
}
.current-weight-banner.is-locked .locked-info i.fas {
    font-size: 1.1em;
    opacity: 0.6;
}
.current-weight-banner.is-locked .countdown {
    text-align: right;
    font-size: 1.6em;
    font-weight: 700;
    color: var(--primary-text-color);
    line-height: 1;
}
.current-weight-banner.is-locked .countdown .countdown-label {
    display: block;
    font-size: 0.45em; /* Menor e mais proporcional */
    font-weight: 500;
    color: var(--secondary-text-color);
    text-transform: uppercase;
    margin-top: 3px;
    letter-spacing: 0.5px;
}

/* ======================================= */
/*    SISTEMA DE NOTIFICAÇÃO ESTILIZADO    */
/* ======================================= */

.app-notification-popup {
    position: fixed;
    bottom: 80px; /* Acima da barra de navegação inferior */
    left: 50%;
    transform: translateX(-50%);
    padding: 14px 22px;
    border-radius: 10px;
    z-index: 2000; /* Garante que fique por cima de tudo, até modais */
    display: flex;
    align-items: center;
    gap: 12px;
    font-size: 0.95em;
    font-weight: 500;
    box-shadow: 0 5px 20px rgba(0,0,0,0.4);
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    border: 1px solid rgba(255, 255, 255, 0.1);
    
    /* Animação de entrada e saída */
    animation: slideUpAndFadeOut 4s cubic-bezier(0.25, 1, 0.5, 1) forwards;
}

.app-notification-popup i.fas {
    font-size: 1.2em;
}

/* --- Variação para SUCESSO (Verde) --- */
.app-notification-popup.success {
    background-color: rgba(76, 175, 80, 0.8); /* Verde com transparência */
    color: #ffffff;
}
.app-notification-popup.success i.fas {
    color: #c8e6c9; /* Tom de verde mais claro */
}

/* --- Variação para ERRO (Vermelho) --- */
.app-notification-popup.error {
    background-color: rgba(244, 67, 54, 0.8); /* Vermelho com transparência */
    color: #ffffff;
}
.app-notification-popup.error i.fas {
    color: #ffcdd2; /* Tom de vermelho mais claro */
}

/* --- Variação para INFORMAÇÃO (Azul/Laranja) --- */
.app-notification-popup.info {
    background-color: rgba(43, 43, 43, 0.85);
    color: var(--primary-text-color);
}
.app-notification-popup.info i.fas {
    color: var(--accent-orange);
}


@keyframes slideUpAndFadeOut {
    0% {
        opacity: 0;
        transform: translate(-50%, 30px);
    }
    10% {
        opacity: 1;
        transform: translate(-50%, 0);
    }
    90% {
        opacity: 1;
        transform: translate(-50%, 0);
    }
    100% {
        opacity: 0;
        transform: translate(-50%, -20px);
    }
}


/* ======================================================== */
/*  CSS DO MODAL DE AJUDA - V3.0 (ALINHADO COM O TEMA)     */
/* ======================================================== */

/* Container para alinhar o título e o ícone de ajuda na página */
.page-header-with-help {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 15px;
    margin-bottom: 20px;
}

/* Botão de ícone de ajuda (?) */
.help-icon-button {
    background: none;
    border: none;
    color: var(--secondary-text-color); /* Usa a cor secundária do seu tema */
    font-size: 1.8rem;
    cursor: pointer;
    padding: 0;
    transition: color 0.2s ease-in-out, transform 0.2s ease-in-out;
}

.help-icon-button:hover {
    color: var(--accent-orange); /* Usa a cor de destaque do seu tema */
    transform: scale(1.1);
}

/* Container principal do modal */
.modal-container {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: 1000;
    display: flex;
    justify-content: center;
    align-items: center;
    padding: 15px;
    opacity: 0;
    visibility: hidden;
    transition: opacity 0.3s ease, visibility 0s 0.3s;
}

/* Fundo escuro (overlay) com blur */
.modal-backdrop {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.65);
    backdrop-filter: blur(5px);
    -webkit-backdrop-filter: blur(5px);
    z-index: 1001;
}

/* O card do modal em si, usando as cores do seu tema */
.stylish-modal {
    background-color: var(--surface-color); /* <<< USA A COR DOS SEUS CARDS */
    color: var(--primary-text-color);       /* <<< USA A COR DE TEXTO PRINCIPAL */
    border-radius: 16px;
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.4);
    width: 100%;
    max-width: 480px;
    position: relative;
    z-index: 1002; /* Fica na frente do backdrop */
    padding: 25px 30px;
    transform: scale(0.95);
    transition: transform 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    border: 1px solid var(--border-color); /* Usa a cor de borda do seu tema */
}

/* Classe de visibilidade para animação */
.modal-container.is-visible {
    opacity: 1;
    visibility: visible;
    transition: opacity 0.3s ease, visibility 0s;
}

.modal-container.is-visible .stylish-modal {
    transform: scale(1);
}

/* Botão de fechar (X) no canto */
.modal-close-btn {
    position: absolute;
    top: 10px;
    right: 15px;
    background: none;
    border: none;
    font-size: 2rem;
    color: var(--secondary-text-color);
    cursor: pointer;
    line-height: 1;
    transition: color 0.2s ease, transform 0.2s ease;
}

.modal-close-btn:hover {
    color: var(--primary-text-color);
    transform: rotate(90deg);
}

/* Cabeçalho do modal */
.modal-header {
    text-align: center;
    margin-bottom: 20px;
}

.modal-icon-wrapper {
    width: 60px;
    height: 60px;
    background-color: rgba(255, 107, 0, 0.1); /* Laranja com 10% de opacidade */
    border-radius: 50%;
    display: inline-flex;
    justify-content: center;
    align-items: center;
    margin-bottom: 15px;
}

.modal-icon-wrapper i {
    font-size: 2rem;
    color: var(--accent-orange);
}

.modal-header h2 {
    font-size: 1.5rem;
    margin: 0;
    font-weight: 600;
    color: var(--primary-text-color);
}

/* Corpo do modal */
.modal-body p {
    font-size: 1rem;
    line-height: 1.6;
    color: var(--secondary-text-color); /* Cor de texto secundária para parágrafos */
    margin-bottom: 25px;
}

.explanation-item {
    display: flex;
    align-items: center;
    gap: 15px;
    margin-bottom: 20px;
}

.item-icon {
    flex-shrink: 0;
    width: 40px;
    height: 40px;
    border-radius: 8px;
    display: grid;
    place-items: center;
    font-size: 1.2rem;
}

/* Cores específicas para cada ícone de item, mantidas como estavam */
.item-icon.calories { background-color: #ff6b0020; color: #ff6b00; }
.item-icon.macros   { background-color: #4caf5020; color: #4caf50; }
.item-icon.water    { background-color: #34aadc20; color: #34aadc; }

.item-text {
    font-size: 0.95rem;
    line-height: 1.5;
    color: var(--primary-text-color);
}

.item-text strong {
    color: #ffffff;
}

.final-tip {
    font-style: italic;
    text-align: center;
    background-color: rgba(0, 0, 0, 0.2); /* Fundo preto transparente sutil */
    padding: 12px 15px;
    border-radius: 8px;
    margin-top: 20px;
    font-size: 0.9em;
    color: var(--secondary-text-color);
}

/* Rodapé do modal */
.modal-footer {
    text-align: center;
    margin-top: 25px;
}

/* Botão "Entendi!" no rodapé, usando o mesmo gradiente dos botões principais */
.modal-footer .btn-primary {
    background-image: linear-gradient(90deg, var(--accent-orange) 0%, var(--accent-red) 50%, var(--accent-orange) 100%);
    background-size: 250% 100%;
    background-position: 100% 0;
    color: white;
    padding: 12px 30px;
    border-radius: 8px;
    border: none;
    font-size: 1rem;
    font-weight: 600;
    cursor: pointer;
    transition: background-position 0.7s cubic-bezier(0.25, 0.46, 0.45, 0.94);
}

.modal-footer .btn-primary:hover {
    background-position: 0% 0;
}

@media (max-width: 600px) {

    /* Ajusta o padding geral do container para dar mais espaço ao modal */
    .modal-container {
        padding: 10px;
        align-items: flex-end; /* Alinha o modal na parte de baixo da tela */
        padding-bottom: 20px;  /* Deixa um respiro na parte inferior */
    }

    /* O card do modal em si */
    .stylish-modal {
        padding: 20px 20px; /* Padding interno menor */
        /* Animação de entrada vindo de baixo no mobile */
        transform: translateY(50px) scale(0.98);
    }
    .modal-container.is-visible .stylish-modal {
        transform: translateY(0) scale(1);
    }

    /* Ícone do header */
    .modal-icon-wrapper {
        width: 50px;
        height: 50px;
        margin-bottom: 10px;
    }
    .modal-icon-wrapper i {
        font-size: 1.6rem;
    }

    /* Título do header */
    .modal-header h2 {
        font-size: 1.3rem; /* Título menor */
        margin-bottom: -5px; /* Reduz espaço entre título e corpo */
    }

    /* Corpo do modal */
    .modal-body p {
        font-size: 0.9em; /* Texto do parágrafo menor */
        line-height: 1.5;
        margin-bottom: 15px;
    }
    
    .explanation-item {
        gap: 12px;
        margin-bottom: 15px;
    }
    .item-icon {
        width: 35px;
        height: 35px;
        font-size: 1.1rem;
    }
    .item-text {
        font-size: 0.85em; /* Texto da explicação menor */
    }
    
    .final-tip {
        font-size: 0.8em;
        padding: 10px;
    }

    /* Rodapé do modal */
    .modal-footer {
        margin-top: 20px;
    }
    .modal-footer .btn-primary {
        padding: 10px 25px; /* Botão menor */
        font-size: 0.95rem;
    }
    
    /* Título e ícone da página */
    .page-header-with-help {
        gap: 10px;
    }
    .help-icon-button {
        font-size: 1.6rem;
    }
}


/* ======================================================== */
/*    ROTINA GAMIFICADA V4 - DESIGN "TUDO EM UM"            */
/* ======================================================== */

.routine-section-gamified {
    margin-top: 25px;
}
.routine-section-gamified .section-header {
    margin-bottom: 15px; /* Menos espaço, já que o card é o destaque */
}

/* O "CARD" principal que agora contém tudo */
.interactive-missions-container {
    background-color: var(--surface-color);
    border-radius: 16px;
    padding: 25px 20px;
    border: 1px solid var(--border-color);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.25);
    margin-bottom: 25px; /* Espaço abaixo de todo o bloco */
}

/* Container da barra de progresso (agora dentro do card) */
.routine-progress-container {
    width: 100%;
    margin-bottom: 25px;
}
.routine-progress-track {
    position: relative;
    width: 100%;
    height: 8px;
    background-color: var(--bg-color); /* Fundo mais escuro para contraste */
    border-radius: 4px;
    border: 1px solid #333;
}
.routine-progress-fill {
    position: absolute;
    height: 100%;
    background: linear-gradient(90deg, #38ef7d, #11998e);
    border-radius: 4px;
    transition: width 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}
.progress-character {
    position: absolute;
    top: 50%;
    transform: translate(-50%, -50%);
    font-size: 28px;
    color: var(--primary-text-color);
    transition: left 0.6s cubic-bezier(0.4, 0, 0.2, 1);
   padding-bottom: 20px; /* <-- AUMENTE ESTE VALOR */
}
.progress-character i {
    filter: drop-shadow(0 3px 3px rgba(0,0,0,0.5));
}
.routine-progress-text {
    text-align: center;
    margin-top: 15px;
    font-size: 14px;
    color: var(--secondary-text-color);
}
.routine-progress-text strong {
    color: var(--primary-text-color);
    font-weight: 600;
}

/* A "tela" onde os cards de pergunta aparecem e desaparecem */
.mission-screen {
    position: relative;
    min-height: 180px; /* Altura para o conteúdo da pergunta */
}

/* O card interno que transiciona */
.mission-card-interactive {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    text-align: center;
    transition: opacity 0.4s ease, transform 0.4s ease;
    
    /* Posicionamento absoluto dentro da "tela" */
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
}

.mission-card-interactive.hidden {
    opacity: 0;
    pointer-events: none;
    transform: scale(0.95);
}

.mission-icon-interactive {
    width: 44px;
    height: 44px;
    border-radius: 12px;
    display: grid;
    place-items: center;
    background-color: rgba(255, 107, 0, 0.1);
    color: var(--accent-orange);
    font-size: 22px;
    margin-bottom: 15px;
}

.mission-title-interactive {
    font-size: 1.05rem;
    font-weight: 500;
    color: var(--primary-text-color);
    margin-bottom: 30px;
    line-height: 1.5;
    max-width: 95%; /* Permite ocupar mais espaço */
}

/* Estilos dos botões (permanecem os mesmos) */
.mission-actions-interactive {
    display: flex;
    gap: 15px;
}
.mission-actions-interactive button {
    padding: 12px 45px;
    border-radius: 50px;
    font-size: 1rem;
    font-weight: 700;
    cursor: pointer;
    transition: transform 0.15s cubic-bezier(0.2, 0, 0, 1), background-color 0.2s ease, border-color 0.2s ease;
    outline: none;
    -webkit-tap-highlight-color: transparent;
    appearance: none;
    -webkit-appearance: none;
}
.mission-actions-interactive button:active {
    transform: scale(0.96);
    transition-duration: 0.1s;
}
.mission-btn-yes {
    background-color: #388e3c;
    color: white;
    border: none;
    box-shadow: 0 4px 15px -5px rgba(56, 142, 60, 0.6);
}
.mission-btn-yes:hover {
    background-color: #43a047;
}
.mission-btn-no {
    background-color: transparent;
    color: var(--secondary-text-color);
    border: 2px solid var(--border-color);
}
.mission-btn-no:hover {
    background-color: rgba(160, 160, 160, 0.1);
    border-color: var(--secondary-text-color);
}

/* Card de Celebração */
.mission-card-interactive.celebration .celebration-icon {
    background-color: rgba(255, 215, 0, 0.1);
    color: #FFD700;
    font-size: 40px;
}
.mission-card-interactive.celebration .celebration-subtitle {
    font-size: 0.9rem;
    color: var(--secondary-text-color);
    margin-top: -15px;
}

/* ======================================================== */
/*    ANIMAÇÃO DO PERSONAGEM ESTÁTICO - V.FINAL             */
/* ======================================================== */

/* Animação de "andar parado" (idle) que sobe e desce */
@keyframes idle-animation {
    0% { transform: translateY(0); }
    50% { transform: translateY(-3px); } /* Sobe um pouquinho */
    100% { transform: translateY(0); }
}

/* Estilo principal do personagem */
.progress-character {
    position: absolute;
    top: 50%;
    transform: translateY(-50%); /* Centraliza verticalmente na barra */
    
    /* A transição para o movimento lateral (esquerda para a direita) */
    transition: left 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Estilo do ícone dentro do container do personagem */
.progress-character i {
    font-size: 28px;
    color: var(--primary-text-color);
    
    /* Sombra para destacar */
    filter: drop-shadow(0 3px 3px rgba(0,0,0,0.5));
    
    /* Aplica a animação de "andar parado" */
    animation: idle-animation 1.5s infinite ease-in-out;
    
    /* Posicionamento para o ícone ficar ACIMA da barra */
    display: block;
    position: relative;
    bottom: 0px; /* Joga o ícone para cima */
}

/* ======================================================== */
/*      CARD DE CELEBRAÇÃO ANIMADO E ESTILIZADO             */
/* ======================================================== */

/* Animações Keyframes Corretas */
@keyframes trophy-pulse {
    0% { transform: scale(1); }
    50% { transform: scale(1.08); }
    100% { transform: scale(1); }
}

@keyframes fadeIn-scaleUp {
    to {
        opacity: 1;
        transform: scale(1);
    }
}

/* --- ESTILOS DO CARD DE CELEBRAÇÃO --- */
.mission-card-interactive.celebration {
    background-color: var(--surface-color); 
    border-color: var(--border-color); 
    overflow: hidden; 
}

.celebration-content {
    animation: fadeIn-scaleUp 0.5s 0.2s ease-out forwards;
    opacity: 0;
    transform: scale(0.9);
    display: flex;
    flex-direction: column;
    align-items: center;
}

.mission-card-interactive.celebration .celebration-icon {
    background: none;
    color: #FFD700;
    font-size: 50px;
    margin-bottom: 20px;
    animation: trophy-pulse 2s infinite ease-in-out;
}

.mission-card-interactive.celebration .mission-title-interactive {
    font-size: 1.4rem;
    font-weight: 700;
    color: white;
    margin-bottom: 5px;
}

.mission-card-interactive.celebration .celebration-subtitle {
    font-size: 1rem;
    color: var(--secondary-text-color);
}


/* ======================================================== */
/*      ANIMAÇÃO DE CONFETES V2 - DENSA E ALEATÓRIA         */
/* ======================================================== */

/* Animação de queda mais complexa com movimento horizontal e rotação */
@keyframes confetti-fall {
    0% {
        transform: translateY(-150px) translateX(0px) rotateZ(0deg);
        opacity: 1;
    }
    100% {
        transform: translateY(250px) translateX(var(--x-end)) rotateZ(var(--r-end));
        opacity: 0;
    }
}

/* --- ESTILOS DOS CONFETES --- */
.confetti-container {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
    overflow: hidden;
}

.confetti {
    position: absolute;
    width: 8px;
    height: 16px;
    background-color: #f00;
    opacity: 0;
    --x-end: 0px;
    --r-end: 720deg;
    animation: confetti-fall var(--duration, 3s) var(--delay, 0s) ease-out forwards;
}

/* --- DEFINIÇÕES PARA CADA CONFETE INDIVIDUALMENTE --- */
.confetti:nth-child(1) { left: 10%; background-color: #FFD700; --duration: 3.5s; --delay: 0s; --x-end: 50px; }
.confetti:nth-child(2) { left: 20%; background-color: #4CAF50; --duration: 3s; --delay: 0.1s; --x-end: -30px; --r-end: 360deg; }
.confetti:nth-child(3) { left: 30%; background-color: #3498db; --duration: 4s; --delay: 0.25s; }
.confetti:nth-child(4) { left: 40%; background-color: #FF6B00; --duration: 2.8s; --delay: 0.3s; --x-end: 40px; --r-end: 540deg; }
.confetti:nth-child(5) { left: 50%; background-color: #e91e63; --duration: 3.2s; --delay: 0.5s; --x-end: -20px; }
.confetti:nth-child(6) { left: 60%; background-color: #FFD700; --duration: 4.5s; --delay: 0.6s; --r-end: 180deg; }
.confetti:nth-child(7) { left: 70%; background-color: #4CAF50; --duration: 3.7s; --delay: 0.75s; --x-end: -50px; }
.confetti:nth-child(8) { left: 80%; background-color: #3498db; --duration: 3.1s; --delay: 0.8s; }
.confetti:nth-child(9) { left: 90%; background-color: #FF6B00; --duration: 3.9s; --delay: 1s; --x-end: 20px; --r-end: 600deg; }
.confetti:nth-child(10){ left: 5%;  background-color: #e91e63; --duration: 3.3s; --delay: 1.1s; }
.confetti:nth-child(11){ left: 15%; background-color: #FFD700; --duration: 2.9s; --delay: 1.25s; --x-end: -40px; }
.confetti:nth-child(12){ left: 25%; background-color: #4CAF50; --duration: 4.2s; --delay: 1.3s; --r-end: 450deg; }
.confetti:nth-child(13){ left: 35%; background-color: #3498db; --duration: 3.6s; --delay: 1.5s; --x-end: 60px; }
.confetti:nth-child(14){ left: 45%; background-color: #FF6B00; --duration: 3.8s; --delay: 1.6s; }
.confetti:nth-child(15){ left: 55%; background-color: #e91e63; --duration: 3s; --delay: 1.75s; --x-end: -30px; }
.confetti:nth-child(16){ left: 65%; background-color: #FFD700; --duration: 4.1s; --delay: 1.8s; --r-end: 810deg; }
.confetti:nth-child(17){ left: 75%; background-color: #4CAF50; --duration: 3.4s; --delay: 2s; }
.confetti:nth-child(18){ left: 85%; background-color: #3498db; --duration: 3.3s; --delay: 2.1s; --x-end: -25px; }
.confetti:nth-child(19){ left: 95%; background-color: #FF6B00; --duration: 4.3s; --delay: 2.25s; }
.confetti:nth-child(20){ left: 8%;  background-color: #e91e63; --duration: 3.7s; --delay: 2.3s; --r-end: 270deg; }


/* ======================================================== */
/*    ESTILO EXCLUSIVO E ISOLADO PARA O MODAL DE PESO       */
/*    (Não afeta outros modais do site)                    */
/* ======================================================== */

/* Container principal do modal de peso. Começa escondido. */
.weight-modal {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: 1050;
    display: flex;
    align-items: center;
    justify-content: center;
    
    /* Começa transparente, invisível e não clicável */
    opacity: 0;
    visibility: hidden;
    pointer-events: none; 

    /* Fundo escuro que aparecerá suavemente */
    background-color: rgba(0, 0, 0, 0); 
    transition: background-color 0.3s ease, opacity 0.3s ease, visibility 0s 0.3s;
}

/* Quando a classe .is-visible for adicionada pelo JavaScript */
.weight-modal.is-visible {
    opacity: 1;
    visibility: visible;
    pointer-events: auto;
    background-color: rgba(0, 0, 0, 0.65); /* Fundo escurece */
    transition: background-color 0.3s ease, opacity 0.3s ease, visibility 0s;
}

/* O "card" do modal */
.weight-modal-content {
    background-color: var(--surface-color);
    padding: 25px;
    border-radius: 12px;
    width: 90%;
    max-width: 400px;
    box-shadow: 0 5px 20px rgba(0,0,0,0.3);
    position: relative;
    
    /* Animação de entrada */
    transform: translateY(20px) scale(0.98);
    opacity: 0;
    transition: transform 0.3s ease-out, opacity 0.3s ease-out;
}

/* Animação de entrada para o conteúdo quando o modal fica visível */
.weight-modal.is-visible .weight-modal-content {
    transform: translateY(0) scale(1);
    opacity: 1;
}

/* Estilos para o Título e Botão de Fechar */
.weight-modal-title {
    margin-top: 0;
    margin-bottom: 20px;
    text-align: center;
    font-weight: 600;
    font-size: 1.25em;
    color: var(--primary-text-color);
}

.weight-modal-close-btn {
    position: absolute;
    top: 10px;
    right: 15px;
    font-size: 28px;
    font-weight: 300;
    color: var(--secondary-text-color);
    background: none;
    border: none;
    cursor: pointer;
    line-height: 1;
    padding: 0;
    transition: color 0.2s ease, transform 0.2s ease;
}

.weight-modal-close-btn:hover {
    color: var(--primary-text-color);
    transform: rotate(90deg);
}